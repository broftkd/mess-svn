/***************************************************************************

        PP-01 driver by Miodrag Milanovic

        08/09/2008 Preliminary driver.

****************************************************************************/


#include "driver.h"
#include "cpu/i8085/i8085.h"
#include "includes/pp01.h"


/* Address maps */
static ADDRESS_MAP_START(pp01_mem, ADDRESS_SPACE_PROGRAM, 8)
	AM_RANGE(0x0000, 0x0fff) AM_RAMBANK(1)
	AM_RANGE(0x1000, 0x1fff) AM_RAMBANK(2)
	AM_RANGE(0x2000, 0x2fff) AM_RAMBANK(3)
	AM_RANGE(0x3000, 0x3fff) AM_RAMBANK(4)
	AM_RANGE(0x4000, 0x4fff) AM_RAMBANK(5)
	AM_RANGE(0x5000, 0x5fff) AM_RAMBANK(6)
	AM_RANGE(0x6000, 0x6fff) AM_RAMBANK(7)
	AM_RANGE(0x7000, 0x7fff) AM_RAMBANK(8)
	AM_RANGE(0x8000, 0x8fff) AM_RAMBANK(9)
	AM_RANGE(0x9000, 0x9fff) AM_RAMBANK(10)
	AM_RANGE(0xa000, 0xafff) AM_RAMBANK(11)
	AM_RANGE(0xb000, 0xbfff) AM_RAMBANK(12)
	AM_RANGE(0xc000, 0xcfff) AM_RAMBANK(13)
	AM_RANGE(0xd000, 0xdfff) AM_RAMBANK(14)
	AM_RANGE(0xe000, 0xefff) AM_RAMBANK(15)
	AM_RANGE(0xf000, 0xffff) AM_RAMBANK(16)
ADDRESS_MAP_END

static ADDRESS_MAP_START( pp01_io, ADDRESS_SPACE_IO, 8 )
	AM_RANGE(0xc0, 0xc3) AM_DEVREADWRITE("ppi8255", ppi8255_r, ppi8255_w)
	AM_RANGE(0xd0, 0xd3) AM_DEVREADWRITE("pit8253", pit8253_r, pit8253_w)
	AM_RANGE(0xe0, 0xef) AM_WRITE(pp01_mem_block_w)
	AM_RANGE(0xf0, 0xff) AM_WRITE(pp01_mem_block_w)
ADDRESS_MAP_END

/* Input ports */
static INPUT_PORTS_START( pp01 )
	PORT_START("LINE0")
	PORT_BIT(0x01, IP_ACTIVE_HIGH, IPT_KEYBOARD) PORT_NAME("U") PORT_CODE(KEYCODE_U)
	PORT_BIT(0x02, IP_ACTIVE_HIGH, IPT_KEYBOARD) PORT_NAME("A") PORT_CODE(KEYCODE_A)
	PORT_BIT(0x04, IP_ACTIVE_HIGH, IPT_KEYBOARD) PORT_NAME("T") PORT_CODE(KEYCODE_T)
	PORT_BIT(0x08, IP_ACTIVE_HIGH, IPT_KEYBOARD) PORT_NAME("L") PORT_CODE(KEYCODE_L)
	PORT_BIT(0x10, IP_ACTIVE_HIGH, IPT_KEYBOARD) PORT_NAME("W") PORT_CODE(KEYCODE_W)
	PORT_BIT(0x20, IP_ACTIVE_HIGH, IPT_KEYBOARD) PORT_NAME("F6") PORT_CODE(KEYCODE_F6)
	PORT_BIT(0x40, IP_ACTIVE_HIGH, IPT_KEYBOARD) PORT_NAME("F") PORT_CODE(KEYCODE_F)
	PORT_BIT(0x80, IP_ACTIVE_HIGH, IPT_KEYBOARD) PORT_NAME("F7") PORT_CODE(KEYCODE_F7)

INPUT_PORTS_END

/* Machine driver */
static MACHINE_DRIVER_START( pp01 )
	/* basic machine hardware */
	MDRV_CPU_ADD("maincpu", 8080, 2000000)
	MDRV_CPU_PROGRAM_MAP(pp01_mem)
	MDRV_CPU_IO_MAP(pp01_io)

	MDRV_MACHINE_START( pp01 )
	MDRV_MACHINE_RESET( pp01 )

    /* video hardware */
	MDRV_SCREEN_ADD("screen", RASTER)
	MDRV_SCREEN_REFRESH_RATE(50)
	MDRV_SCREEN_VBLANK_TIME(ATTOSECONDS_IN_USEC(2500)) /* not accurate */
	MDRV_SCREEN_FORMAT(BITMAP_FORMAT_INDEXED16)
	MDRV_SCREEN_SIZE(256, 256)
	MDRV_SCREEN_VISIBLE_AREA(0, 256-1, 0, 256-1)
	MDRV_PALETTE_LENGTH(8)
	MDRV_PALETTE_INIT(pp01)

	MDRV_VIDEO_START(pp01)
	MDRV_VIDEO_UPDATE(pp01)
	
	MDRV_PIT8253_ADD( "pit8253", pp01_pit8253_intf )

	MDRV_PPI8255_ADD( "ppi8255", pp01_ppi8255_interface )	
MACHINE_DRIVER_END

static SYSTEM_CONFIG_START(pp01)
	CONFIG_RAM_DEFAULT(64 * 1024)
SYSTEM_CONFIG_END

/* ROM definition */

ROM_START( pp01 )
	ROM_REGION( 0x18000, "maincpu", ROMREGION_ERASEFF )
	
	ROM_LOAD( "ep01.rom", 0x14000, 0x0400, CRC(e48e440f) SHA1(aaae41f0bf163f254e28f6e4d9f6010b349e0c45))
	ROM_LOAD( "ep02.rom", 0x14400, 0x0400, CRC(b9314867) SHA1(220e2a686c6624574e8ea7f6012030c8378a8be6))	
	ROM_LOAD( "ep03.rom", 0x14800, 0x0400, CRC(47b91d49) SHA1(51445e24d1c375e798c5ed7b48cb1c7b5e01603a))
	ROM_LOAD( "ep04.rom", 0x14c00, 0x0400, CRC(cc890123) SHA1(7110f301453d925da0d3f29c2ba4eacd5ff8583d))
	
	ROM_LOAD( "ep05.rom", 0x15000, 0x0400, CRC(d9fe40d5) SHA1(90a88af829f0011598a88a91932dc447ec6a28f0))
	ROM_LOAD( "ep06.rom", 0x15400, 0x0400, CRC(3f74efb3) SHA1(77d055eb53ba9b4b14eb2bb8d71f93095b846bb5))
	ROM_LOAD( "ep07.rom", 0x15800, 0x0400, CRC(1dd0bc29) SHA1(109bc3f24a76884d2581f75edc532917cb7ea155))
	ROM_LOAD( "ep08.rom", 0x15c00, 0x0400, CRC(607b710a) SHA1(c5ac7da31204c54d6892d6b708d0291d71963581))
	
	ROM_LOAD( "ep09.rom", 0x16000, 0x0400, CRC(07f773d1) SHA1(a6cf454318ef0a564a86e669b751e414b12c12d1))
	ROM_LOAD( "ep10.rom", 0x16400, 0x0400, CRC(7793d84b) SHA1(d16ad3db36c8cec68713082ee60324219d3d5032))
	ROM_LOAD( "ep11.rom", 0x16800, 0x0400, CRC(d1b98b5e) SHA1(5526af6317667d707ae413916242cd1bac821373))
	ROM_LOAD( "ep12.rom", 0x16c00, 0x0400, CRC(03c45326) SHA1(f9157ab86cdf1d111bcf19c24e4d7250705be965))
	
	ROM_LOAD( "ep13.rom", 0x17000, 0x0400, CRC(51769d6c) SHA1(76d6e91cf32b1eb94b9c0ded02e5057ed7ff7d72))
	ROM_LOAD( "ep14.rom", 0x17400, 0x0400, CRC(5d48cefb) SHA1(9b8599dabaf7297ec800fa9a122ad7e3b7b30e8b))
	ROM_LOAD( "ep15.rom", 0x17800, 0x0400, CRC(f44bfe36) SHA1(0ab3c4f061dff6f779685409b07343d0a839fdae))
	ROM_LOAD( "ep16.rom", 0x17c00, 0x0400, CRC(754ff1d9) SHA1(3cb22f5d624dc6da5967bfd347f52a8182e13675))
ROM_END


/* Driver */

/*    YEAR  NAME    PARENT  COMPAT  MACHINE     INPUT       INIT     CONFIG COMPANY                  FULLNAME   FLAGS */
COMP( 198?, pp01, 	0, 	 	0,		pp01, 		pp01, 		pp01, 	 pp01,  	"ZVT",					 "PP-01",	 GAME_NOT_WORKING)
